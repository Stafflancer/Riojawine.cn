/*! real-media-library 03-05-2018 */

jQuery.ajax({url:rmlOpts.ajaxUrl,data:{action:"rml_mce_options",nonce:rmlOpts.nonces.treeContent}}).done(function(l){l.success&&jQuery.extend(rmlOpts,l.data)}),tinymce.PluginManager.add("folder_gallery",function(m,l){m.addCommand("folder_gallery_popup",function(l,a){var e="",o="",t="3",n="",d="";a.fid&&(e=a.fid),a.link&&(o=a.link),a.columns&&(t=a.columns),a.orderby&&(n=a.orderby),a.size&&(d=a.size);for(var r=[],i=1;i<=9;i++)r.push({text:""+i,value:""+i});m.windowManager.open({title:rmlOpts.lang.mceButtonTooltip,body:[{type:"listbox",name:"fid",label:rmlOpts.lang.mceBodyGallery,value:e,values:rmlOpts.mce.raw,tooltip:rmlOpts.lang.mceListBoxDirsTooltip},{type:"listbox",name:"link",label:rmlOpts.lang.mceBodyLinkTo,value:o,values:rmlOpts.lang.mceBodyLinkToValues},{type:"listbox",name:"columns",label:rmlOpts.lang.mceBodyColumns,value:t,values:r},{type:"checkbox",name:"orderby",label:rmlOpts.lang.mceBodyRandomOrder,value:n},{type:"listbox",name:"size",label:rmlOpts.lang.mceBodySize,value:d,values:rmlOpts.lang.mceBodySizeValues}],onsubmit:function(l){if(-1<=l.data.fid&&""!=l.data.fid){var a='[folder-gallery fid="'+l.data.fid+'"';void 0!==l.data.link&&l.data.link.length&&"post"!=l.data.link&&(a+=' link="'+l.data.link+'"'),void 0!==l.data.columns&&"3"!=l.data.columns&&(a+=' columns="'+l.data.columns+'"'),void 0!==l.data.orderby&&1==l.data.orderby?a+=' orderby="rand"':"2"==window.rml.library.getFolderInfo(l.data.fid,"type")&&(a+=' orderby="rml"'),void 0!==l.data.size&&"thumbnail"!=l.data.size&&(a+=' size="'+l.data.size+'"'),a+="]",m.insertContent(a)}}})}),"object"==typeof rmlOpts&&m.addButton("folder_gallery",{icon:"rml-folder-gallery",tooltip:rmlOpts.lang.mceButtonTooltip,onclick:function(){m.execCommand("folder_gallery_popup","",{})}})});