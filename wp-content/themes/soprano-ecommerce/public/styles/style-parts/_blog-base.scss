/* ============================================================================= */
/* Basic blogroll styles. */
/* ============================================================================= */

#sp-blog-inner {
  display   : -webkit-box;
  display   : -ms-flexbox;
  display   : flex;
  -ms-flex-wrap : nowrap;
      flex-wrap : nowrap;

  > .content-column {
    -webkit-box-flex      : 1;
        -ms-flex      : 1 1 auto;
            flex      : 1 1 auto;
    min-width : 0;
    -webkit-box-ordinal-group     : 3;
        -ms-flex-order     : 2;
            order     : 2;
  }

  > .sidebar-column {
    -webkit-box-flex          : 0;
        -ms-flex          : 0 0 360px;
            flex          : 0 0 360px;
    min-width     : 0;
    margin-bottom : -50px;
    -webkit-box-ordinal-group         : 4;
        -ms-flex-order         : 3;
            order         : 3;

    &.left { padding-right : 60px; -webkit-box-ordinal-group : 2; -ms-flex-order : 1; order : 1; }
    &.right { padding-left : 60px; }
    &:empty { display : none; }
  }

  @include media-breakpoint-down(sm) {
    -ms-flex-wrap : wrap;
        flex-wrap : wrap;

    > .sidebar-column, > .content-column { -ms-flex-preferred-size : 100%; flex-basis : 100%; }

    > .content-column { -webkit-box-ordinal-group : 2; -ms-flex-order : 1; order : 1; }
    > .sidebar-column { margin-top : 80px; -webkit-box-ordinal-group : 3; -ms-flex-order : 2; order : 2; }

    > .sidebar-column.left { padding-right : 0; }
    > .sidebar-column.right { padding-left : 0; }
  }
}

.sp-blog-block {
  @include clearfix;

  // styles reset
  p { margin-bottom : 1.5rem; }
  p:last-child { margin-bottom : 0; }

  .entry-excerpt { margin-bottom : 1.5rem; }
  .entry-excerpt, .entry-content {
    @include clearfix;
  }

  .gallery {
    margin-bottom : 1.5rem;
    margin-bottom : calc(1.5rem - 5px);

    &:last-child { margin-bottom : 0; }
  }

  .sp-blog-image {
    position      : relative;
    margin-bottom : 1.5rem;
    opacity       : 1;
    -webkit-transition    : opacity 0.2s linear;
    transition    : opacity 0.2s linear;

    a {
      width    : 100%;
      position : relative;
      display  : block;
    }

    img {
      @include overlay-base();
      @include object-fit();
    }

    &:hover { opacity : 0.7; }
  }

  .entry-title {
    margin-bottom : 1rem;
    font-size     : $font-size-h4;

    a {
      color : #333;
      &:hover { color : $brand-primary; }
    }
  }

  .sp-blog-meta {
    margin-bottom : 1rem;
    width         : 100%;

    ul {
      @include reset-box-model(true);
      display   : block;
      font-size : 0;

      li {
        display        : inline;
        font-size      : 14px;
        text-transform : capitalize;

        &:after {
          display : inline-block;
          content : '/';
          padding : 0 10px;
          color   : #999;
        }

        &:last-child:after { content : none; }
        a, & { color : #999; }
        &:empty { display : none; }
      }
    }
  }

  &.chess {
    position         : relative;
    display          : -webkit-box;
    display          : -ms-flexbox;
    display          : flex;
    -ms-flex-wrap        : nowrap;
        flex-wrap        : nowrap;
    background-color : #f7f7f7;
    margin-bottom    : 60px;

    .meta-column {
      padding   : 50px;
      -webkit-box-flex      : 1;
          -ms-flex      : 1 1 auto;
              flex      : 1 1 auto;
      min-width : 0;

      h4 { font-size : 1.5rem; }
    }

    .image-column {
      -webkit-box-flex          : 0;
          -ms-flex          : 0 0 50%;
              flex          : 0 0 50%;
      min-width     : 0;
      position      : relative;
      overflow      : hidden;
      margin-bottom : 0;
      min-height    : 400px;
    }

    // rearrange columns
    &:nth-child(even) {
      .meta-column { -webkit-box-ordinal-group: 2; -ms-flex-order: 1; order: 1; }
      .image-column { -webkit-box-ordinal-group: 3; -ms-flex-order: 2; order: 2; }

      &.sticky .sp-blog-image {
        &:after { right : 30px; left : auto; }
        &:before { right : 30px; left : auto; }
      }
    }

    // move sticky badge to the right
    &.no-thumbnail.sticky {
      .entry-title { padding-right : 45px; }
      &:after { right : 30px; left : auto; }
      &:before { right : 30px; left : auto; }
    }

    @include media-breakpoint-down(md) {
      -ms-flex-wrap : wrap;
          flex-wrap : wrap;
      .meta-column, .image-column { -ms-flex-preferred-size : 100%; flex-basis : 100%; -webkit-box-ordinal-group: initial; -ms-flex-order: initial; order: initial; }

      &.no-thumbnail.sticky {
        .entry-title { padding-right : 0; }
        &:before, &:after { display : none; }
      }
    }
  }

  &.classic {
    margin-bottom : 80px;
    display       : -webkit-box;
    display       : -ms-flexbox;
    display       : flex;
    -ms-flex-wrap     : nowrap;
        flex-wrap     : nowrap;

    .sp-blog-meta-classic {
      -webkit-box-flex          : 0;
          -ms-flex          : 0 0 90px;
              flex          : 0 0 90px;
      padding-right : 30px;
      text-align    : right;

      .date {
        font-family   : $headings-font-family;
        font-weight   : 500;
        line-height   : 1.5;
        font-size     : 1.4rem;
        margin-bottom : 0.5rem;
      }

      .year { color : #999; }
    }

    .sp-blog-image img {
      @include object-fit(none);
      position : static;
      height   : auto;
      width    : auto;
    }

    // move sticky badge to the right
    &.no-thumbnail.sticky {
      .entry-title { padding-right : 50px; }
      &:after { right : 0; left : auto; }
      &:before { right : 0; left : auto; }
    }

    // hide featured badge on mobile
    @include media-breakpoint-down(md) {
      &.no-thumbnail.sticky {
        .entry-title { padding-right : 0; }
        &:before, &:after { display : none; }
      }
    }
  }

  &.medium {
    margin-bottom : 80px;
    display       : -webkit-box;
    display       : -ms-flexbox;
    display       : flex;
    -ms-flex-wrap     : nowrap;
        flex-wrap     : nowrap;

    .sp-blog-image {
      -webkit-box-flex          : 0;
          -ms-flex          : 0 0 360px;
              flex          : 0 0 360px;
      margin-right  : 30px;
      margin-bottom : 0;
      min-height    : 240px;
    }

    .sp-blog-block-medium h3 {
      font-size : 1.3rem;
    }

    // add sticky styles when no image is attached to a post
    &.no-thumbnail.sticky {
      padding    : 50px;
      background : #f7f7f7;

      &:after, &:before { display : none; }
    }

    @include media-breakpoint-down(lg) {
      -ms-flex-wrap : wrap;
          flex-wrap : wrap;

      .sp-blog-image, .sp-blog-block-medium { -ms-flex-preferred-size : 100%; flex-basis : 100%; }
      .sp-blog-image { padding-right : 0; }
      .sp-blog-image img { @include object-fit(none); position: static; height: auto; }
      .sp-blog-block-medium { margin-top : 1rem; }
    }
  }

  &.masonry {
    margin-bottom : 55px;

    .sp-blog-image img {
      @include object-fit(none);
      position : static;
      width    : 100%;
      height   : auto;
    }

    // move sticky badge to the right
    &.no-thumbnail.sticky {
      padding    : 50px;
      background : #f7f7f7;

      &:after, &:before { display : none; }
    }
  }

  &.sticky .sp-blog-image, &.no-thumbnail.sticky {
    position : relative;

    &:after {
      width         : 32px;
      height        : 48px;
      content       : '';
      position      : absolute;
      left          : 30px;
      top           : 0;
      border-bottom : 16px solid transparent;
      border-left   : 16px solid $brand-primary;
      border-right  : 16px solid $brand-primary;
    }

    &:before {
      content     : 'S';
      font-weight : bold;
      font-size   : 19px;
      color       : #fff;
      left        : 30px;
      position    : absolute;
      z-index     : 9;
      width       : 32px;
      text-align  : center;
      top         : 0;
    }
  }
}